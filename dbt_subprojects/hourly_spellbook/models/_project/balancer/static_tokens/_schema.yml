version: 2

models:
  - name: balancer_v3_aave_static_token_mapping
    meta:
      blockchain: ethereum, gnosis
      project: balancer
      contributors: viniabussafi
    config:
      tags: ['ethereum', 'gnosis', 'static', 'token', 'mapping']
    description: >
      Mapping of Aave tokens, including aTokens, staticATokens, and their corresponding underlying tokens.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - atoken
    columns:
      - name: blockchain
        description: "Blockchain."    
      - name: atoken
        description: "Contract address of the aToken on Ethereum."
      - name: atoken_symbol
        description: "Symbol of the aToken."
      - name: static_atoken
        description: "Contract address of the staticAToken."
      - name: static_atoken_name
        description: "Name of the staticAToken."
      - name: static_atoken_symbol
        description: "Symbol of the staticAToken."
      - name: underlying_token
        description: "Contract address of the underlying token."
      - name: underlying_token_symbol
        description: "Symbol of the underlying token."
      - name: underlying_token_decimals
        description: "Decimal precision of the underlying token."

  - name: balancer_v3_aave_static_token_pricing
    meta:
      blockchain: ethereum, gnosis
      project: balancer
      contributors: viniabussafi
    config:
      tags: ['ethereum', 'gnosis', 'static', 'token', 'pricing']
    description: >
      Pricing information for static tokens. Prices are derived from the ratio of underlying tokens deposited or withdrawn to shares issued or burned, multiplied by the underlying token price.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - minute
            - wrapped_token
    columns:
      - name: minute
        description: "Timestamp of the event, truncated to the nearest minute."
      - name: blockchain
        description: "Blockchain."
      - name: wrapped_token
        description: "Contract address of the wrapped token."
      - name: underlying_token
        description: "Contract address of the underlying token."
      - name: static_atoken_symbol
        description: "Symbol of the staticAToken."
      - name: underlying_token_symbol
        description: "Symbol of the underlying token."
      - name: decimals
        description: "Decimal precision for the token."
      - name: median_price
        description: "Median price of the static token, computed over the dataset."
      - name: next_change
        description: "Timestamp of the next expected pricing change or event affecting the price."