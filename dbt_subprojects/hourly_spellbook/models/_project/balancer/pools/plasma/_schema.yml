version: 2

_blockchain: &blockchain
  name: blockchain
  description: "Blockchain name"

_version: &version
  name: version
  description: "Schema version"

_pool_id: &pool_id
  name: pool_id
  description: "Balancer pool ID"

_token_address: &token_address
  name: token_address
  description: "Token address"

_normalized_weight: &normalized_weight
  name: normalized_weight
  description: "Normalized token weight"

models:
  - name: balancer_v3_plasma_pools_tokens_weights
    meta:
      blockchain: plasma
      project: balancer_v3
      contributors: amandadalle, giovanasoldatelli, tiagoponciano
    config:
      tags: ['plasma', 'balancer', 'pools', 'tokens', 'weights']
    description: >
      Token weights in Balancer v3 pools.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - pool_id
            - token_address
    columns:
      - *blockchain
      - *version
      - *pool_id
      - *token_address
      - *normalized_weight        

  - name: balancer_v3_plasma_lbps
    meta:
      blockchain: plasma
      project: balancer_v3
      contributors: amandadalle, giovanasoldatelli, tiagoponciano
    config:
      tags: ['plasma', 'balancer', 'lbp']
    description: >
      Record of the Liquidity Boostrapping Pools (LBP) of Balancer, an automated portfolio manager and trading platform, on Ethereum.
    columns:
      - *blockchain
      - name: pool_symbol
        description: "Name of the LBP"
      - name: pool_address
        description: "ID of the LBP"
      - name: start_time
        description: "LBP start time"
      - name: end_time
        description: "LBP end time"
      - name: project_token
        description: "Contract address of the token sold by the LBP"
      - name: reserve_token
        description: "Contract address of the token bought by the LBP"        
      - name: project_token_symbol
        description: "Symbol of the token sold by the LBP"
      - name: reserve_token_symbol
        description: "Symbol of the token bought by the LBP"
      - name: project_token_start_weight
        description: "Start Weight of the token sold by the LBP"
      - name: reserve_token_start_weight
        description: "Start Weight of the token bought by the LBP"
      - name: project_token_end_weight
        description: "Start Weight of the token sold by the LBP"
      - name: reserve_token_end_weight
        description: "End Weight of the token bought by the LBP"
