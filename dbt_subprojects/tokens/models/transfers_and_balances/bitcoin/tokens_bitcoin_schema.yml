version: 2

models:
  - name: tokens_bitcoin_net_transfers_daily
    meta:
      blockchain: bitcoin
      sector: tokens
      contributors: krishhh
    config:
      tags: ['tokens', 'net_transfers', 'daily']
    description: "Total transfer amount per day"
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - blockchain
            - block_date
    columns:
      - &blockchain
        name: blockchain
        description: "The blockchain network"
      - &block_date
        name: block_date
        description: "The date of the block"
      - name: net_transfer_amount_usd
        description: "The total net transfer amount for the day"

  - name: tokens_bitcoin_net_transfers_daily_asset 
    meta:
      blockchain: bitcoin
      sector: tokens
      contributors: 0xRob, krishhh
    config:
      tags: ['tokens', 'net_transfers']
    description: "Total transfer amount per day per asset" 
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - blockchain
            - block_date
            - contract_address
    columns:
      - *blockchain
      - *block_date
      - name: contract_address
        description: "The contract address of the asset"
      - name: net_transfer_amount_usd
        description: "The total transfer amount for the day and asset"
