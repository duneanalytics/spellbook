version: 2

models:

  - name: eulerswap_unichain_pool_creations
    meta:
      blockchain: unichain
      sector: dex
      project: eulerswap
      contributors: Henrystats
    config:
      tags: ['unichain', 'pools', 'liquidity', 'eulerswap']
    description: >
      eulerswap Uni V4 unichain DEX pools
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - blockchain
            - pool
    columns:
      - &blockchain
        name: blockchain
        description: "Blockchain which the DEX is deployed"
      - &project
        name: project
        description: "Project name of the DEX"
      - &version
        name: version
        description: "Version of the contract built and deployed by the DEX project"
      - &factory_address
        name: factory_address
        description: "Contract address used to create the pool"
      - &creation_block_time
        name: creation_block_time
        description: "Block time of pool creation"
      - &creation_block_number
        name: creation_block_number
        description: "Block number of pool creation"
      - &pool
        name: pool
        description: "Uni V4 virtual pool ID"
      - &hook
        name: hook
        description: "EulerSwap instance's pool is the hook in Uniswap v4 universe"
      - &eulerAccount
        name: eulerAccount
        description: "eulerAccount"
      - &asset0
        name: asset0
        description: "First token in pool"
      - &asset1
        name: asset1
        description: "Second token in pool"
      - &vault0
        name: vault0
        description: "Contract Address holding First token in pool"
      - &vault1
        name: vault1
        description: "Contract Address holding Second token in pool"
      - &fee
        name: fee
        description: "Trade fee"
      - &protocolFee
        name: protocolFee
        description: "Fee paid to Euler"
      - &protocolFeeRecipient
        name: protocolFeeRecipient
        description: "COntract address receiving Fee paid to Euler"

  - name: eulerswap_unichain_pools
    meta:
      blockchain: unichain
      sector: dex
      project: eulerswap
      contributors: Henrystats
    config:
      tags: ['unichain', 'pools', 'liquidity', 'eulerswap']
    description: >
      Eulerswap pools on unichain
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - blockchain
            - pool
            - eulerAccount
    columns:
      - *blockchain
      - *project
      - *version
      - *factory_address
      - *creation_block_time
      - *creation_block_number
      - *pool
      - *hook
      - *eulerAccount
      - *asset0
      - *asset1
      - *vault0
      - *vault1
      - *fee
      - *protocolFee
      - *protocolFeeRecipient
      - &next_block_number
        name: next_block_number
        description: "creation block_number of the pool tied to the EulerAccount after this"
      - &isActive
        name: isActive
        description: "returns True or False on if pool is active"

  - name: eulerswap_unichain_trades
    meta:
      blockchain: unichain
      sector: dex
      project: eulerswap
      contributors: Henrystats
    config:
      tags: ['unichain', 'pools', 'trades', 'eulerswap']
    description: "Eulerswap unichain base trades"
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - tx_hash
            - evt_index