#Welcome to your Spellbook!

name: "spellbook"
version: "1.0.0"
config-version: 2

# This setting configures which "profile" dbt uses for this project.
profile: "spellbook"

# These configurations specify where dbt should look for different types of files.
# You don't need to change these!
model-paths: ["models"]
analysis-paths: ["analyses"]
test-paths: ["tests"]
seed-paths: ["seeds"]
macro-paths: ["macros"]
snapshot-paths: ["snapshots"]

target-path: "target" # directory which will store compiled SQL files
clean-targets: # directories to be removed by `dbt clean`
  - "target"
  - "dbt_packages"

# Configuring models
# Full documentation: https://docs.getdbt.com/docs/configuring-models
models:
  spellbook:
    ens:
      +schema: ens
      +materialized: view
    dex:
      +schema: dex
      +materialized: view
    nft:
      +schema: nft
      +materialized: view
      ethereum:
        +schema: nft_ethereum
        +materialized: view
      bnb:
        +schema: nft_bnb
        +materialized: view
      avalanche_c:
        +schema: nft_avalanche_c
        +materialized: view
      polygon:
        +schema: nft_polygon
        +materialized: view
    uniswap:
      +schema: uniswap
      +materialized: view
      ethereum:
        +schema: uniswap_ethereum
        +materialized: view
      optimism:
        +schema: uniswap_optimism
        +materialized: view
    opensea:
      +schema: opensea
      +materialized: view
      ethereum:
        +schema: opensea_ethereum
        +materialized: view
      solana:
        +schema: opensea_solana
        +materialized: view
    looksrare:
      +schema: looksrare
      +materialized: view
      ethereum:
        +schema: looksrare_ethereum
        +materialized: view
    x2y2:
      +schema: x2y2
      +materialized: view
      ethereum:
        +schema: x2y2_ethereum
        +materialized: view
    magiceden:
      +schema: magiceden
      +materialized: view
      solana:
        +schema: magiceden_solana
        +materialized: view
    nomad:
      +schema: nomad
      +materialized: view
      ethereum:
        +schema: nomad_ethereum
        +materialized: view

    seaport:
      +schema: seaport
      +materialized: view
      ethereum:
        +schema: seaport_ethereum
        +materialized: view

    balances:
      +schema: balances
      +materialized: view
      ethereum:
        +schema: balances_ethereum
        +materialized: view

    tokens:
      +schema: tokens
      +materialized: view
      ethereum:
        +schema: tokens_ethereum
        +materialized: view
      optimism:
        +schema: tokens_optimism
        +materialized: view
      avalanche_c:
        +schema: tokens_avalanche_c
      bnb:
        +schema: tokens_bnb
        +materialized: view
      gnosis:
        +schema: tokens_gnosis
        +materialized: view

    transfers:
      +schema: transfers
      +materialized: view
      ethereum:
        +schema: transfers_ethereum
        +materialized: view
      optimism:
        +schema: transfers_optimism

    sudoswap:
      +schema: sudoswap
      +materialized: view
      ethereum:
        +schema: sudoswap_ethereum
        +materialized: view

    safe:
      +schema: safe
      +materialized: view
      ethereum:
        +schema: safe_ethereum
        +materialized: view

    tornado_cash:
      +schema: tornado_cash
      +materialized: view

    archipelago:
      +schema: archipelago
      +materialized: view
      ethereum:
        +schema: archipelago_ethereum
        +materialized: view

    integration_test:
      +schema: integration_test
      +materialized: view

    curvefi:
      +schema: curvefi
      +materialized: view
      ethereum:
        +schema: curvefi_ethereum
        +materialized: view

seeds:
  spellbook:
    balances:
      ethereum:
        +enabled: true
        +schema: test_data
        balances_ethereum_erc20_latest_entries:
          +column_types:
            timestamp: timestamp
            wallet_address: string
            token_address: string
            amount_raw: string
        balances_ethereum_erc20_specific_wallet:
          +column_types:
            timestamp: timestamp
            wallet_address: string
            token_address: string
            token_symbol: string
            amount_raw: string
            amount: string
    opensea:
      ethereum:
        +enabled: true
        +schema: test_data
        opensea_ethereum_trades_postgres:
          +column_types:
            evt_block_time: timestamp
            evt_tx_hash: string
            price: string
      solana:
        +enabled: true
        +schema: test_data
        opensea_solana_trades_solscan:
          +column_types:
            block_time: timestamp
            tx_hash: string
            amount: string
    magiceden:
      solana:
        +enabled: true
        +schema: test_data
        magiceden_solana_trades_solscan:
          +column_types:
            block_time: timestamp
            tx_hash: string
            amount: string
    ens:
      +enabled: true
      +schema: test_data
    dex:
      +enabled: true
      +schema: test_data
      trades:
        +column_types:
          blockchain: string
          project: string
          version: string
          block_date: date
          tx_hash: string
          evt_index: int
          token_bought_address: string
          token_bought_amount: float
          token_sold_address: string
          token_sold_amount: float

    sudoswap:
      +enabled: true
      +schema: test_data
      sudoswap_ethereum_example_trades:
        +column_types:
          block_number: long
          tx_hash: string
          trade_category: string
          nft_contract_address: string
          token_id: string
          amount_original: double
          platform_fee_amount: double
          pool_fee_amount: double

    curvefi:
      ethereum:
        +enabled: true
        +schema: test_data

# Configuring variables
# Full documentation: https://docs.getdbt.com/reference/dbt-jinja-functions/var
vars:
  # contract addresses
  curvefi_ethereum_DAI_USDC_USDT_pool_contract: "0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7"
  curvefi_ethereum_sBTC_swap_contract: "0x7fc77b5c7614e1533320ea6ddc2eb61fa00a9714"
  curvefi_ethereum_REN_swap_contract: "0x93054188d876f558f4a66b2ef1d97d16edf0895b"

  # token addresses
  3CRV_ethereum_token: "0x6c3f90f043a72fa612cbac8115ee7e52bde6e490"
  sbtcCRV_ethereum_token: "0x075b1bb99792c9e1041ba13afef80c91a1e70fb3"
  renCRV_ethereum_token: "0x49849c98ae39fff122806c06791fa73784fb3675"
  DAI_ethereum_token: "0x6b175474e89094c44da98b954eedeac495271d0f"
  renBTC_ethereum_token: "0xeb4c2781e4eba804ce9a9803c67d0893436bb27d"
  USDC_ethereum_token: "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"
  WBTC_ethereum_token: "0x2260fac5e5542a773aa44fbcfedf7c193bc2c599"
  USDT_ethereum_token: "0xdac17f958d2ee523a2206206994597c13d831ec7"
  sBTC_ethereum_token: "0xfe18be6b3bd88a2d2a7f928d00292e7a9963cfc6"
