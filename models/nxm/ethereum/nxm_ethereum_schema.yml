version: 2

models:
  - name: nxm_ethereum_quotation_trades
    meta:
      blockchain: ethereum
      project: nxm
      contributors: [zxf, jonah]
    config:
      tags: ['ethereum','nexusmutual','trades']
    description: >
        nexusmutual quotation trades on Ethereum
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - block_date
            - cover_block_number
            - status_num
            - evt_tx_hash
            - evt_index
    columns:
      - &cid
        name: cid
        description: "cid"
      - &contract_address
        name: contract_address
        description: "contract_address"
      - &symbol
        name: symbol
        description: "symbol"
      - &evt_index
        name: evt_index
        description: "evt_index"
      - &evt_tx_hash
        name: evt_tx_hash
        description: "evt_tx_hash"
      - &curr
        name: curr
        description: "curr"
      - &premium
        name: premium
        description: "premium"
        tests:
          - nxm_trades_column_values:
              nxm_ethereum_trades_seed: ref('nxm_ethereum_trades_seed')
      - &pre_amount
        name: pre_amount
        description: "pre_amount"
      - &premiumNXM
        name: premiumNXM
        description: "premiumNXM"
        tests:
          - nxm_trades_column_values:
              nxm_ethereum_trades_seed: ref('nxm_ethereum_trades_seed')
      - &preNXM_amount
        name: pre_nxm_amount
        description: "pre_nxm_amount"
      - &scAdd
        name: scAdd
        description: "scAdd"
      - &sumAssured
        name: sumAssured
        description: "sumAssured"
        tests:
          - nxm_trades_column_values:
              nxm_ethereum_trades_seed: ref('nxm_ethereum_trades_seed')
      - &block_hash
        name: block_hash
        description: "block_hash"
      - &nonce
        name: nonce
        description: "nonce"
      - &gas_limit
        name: gas_limit
        description: "gas_limit"
      - &gas_price
        name: gas_price
        description: "gas_price"
      - &gas_used
        name: gas_used
        description: "gas_used"
      - &max_fee_per_gas
        name: max_fee_per_gas
        description: "max_fee_per_gas"
      - &max_priority_fee_per_gas
        name: max_priority_fee_per_gas
        description: "max_priority_fee_per_gas"
      - &priority_fee_per_gas
        name: priority_fee_per_gas
        description: "priority_fee_per_gas"
      - &success
        name: success
        description: "success"
      - &tx_type
        name: tx_type
        description: "tx_type"
      - &tx_value
        name: tx_value
        description: "tx_value"
      - &status_num
        name: status_num
        description: "status_num"
      - &cover_block_number
        name: cover_block_number
        description: "cover_block_number"
      - &cover_block_time
        name: cover_block_time
        description: "cover_block_time"
      - &evt_block_number
        name: evt_block_number
        description: "evt_block_number"
      - &evt_block_time
        name: evt_block_time
        description: "evt_block_time"
      - &evt_expiry
        name: evt_expiry
        description: "evt_expiry"
      - &evt_expiry_date
        name: evt_expiry_date
        description: "evt_expiry_date"
      - &block_date
        name: block_date
        description: "UTC event block date of each DEX trade"