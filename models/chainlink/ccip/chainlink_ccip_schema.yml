version: 2

models:
  - name: chainlink_ccip_onramps
    meta:
      blockchain: ethereum, optimism, avalanche_c, polygon
      sector: CCIP
      project: chainlink
      contributors: synthquest
    config:
      tags: ['ethereum','optimism', 'avalanche_c', 'polygon', 'chainlink']
    description: >
        Chainlink CCIP messages sent from ethereum
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - evt_index
            - evt_tx_hash
            - message
    columns:
      - &contract_address
        name: contract_address
        description: "Ethereum CCIP ramp contract address"
      - &evt_block_number
        name: evt_block_number
        description: "Block number which processed the unique transaction hash"
      - &evt_block_time
        name: evt_block_time
        description: "Timestamp for block event time in UTC"
      - &evt_index
        name: evt_index
        description: "Index value of the transaction"
      - &evt_tx_hash
        name: evt_tx_hash
        description: "Block number which processed the unique transaction hash"
      - &message
        name: message
        description: "Message included in CCIP Send Request"

  - name: chainlink_ccip_offramps
    meta:
      blockchain: ethereum, optimism, avalanche_c, polygon
      sector: CCIP
      project: chainlink
      contributors: synthquest
    config:
      tags: ['ethereum','optimism', 'avalanche_c', 'polygon', 'chainlink']
    description: >
        Chainlink CCIP messages sent to ethereum
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - evt_index
            - evt_tx_hash
            - message
    columns:
      - *contract_address
      - *evt_tx_hash
      - *evt_index
      - *evt_block_time
      - *evt_block_number
      - &messageId
        name: messageId
        description: "Unique messageId associated with CCIP tx. This will be the same ID for the tx's on both chains."
      - &returnData
        name: returnData
        description: "return data CCIP"
      - &sequenceNumber
        name: sequenceNumber
        description: "sequence CCIP"
      - &state
        name: state
        description: "state CCIP"

  
  - name: chainlink_ccip_events
    meta:
      blockchain: ethereum, optimism, avalanche_c, polygon
      sector: CCIP
      project: chainlink
      contributors: synthquest
    config:
      tags: ['ethereum','optimism', 'avalanche_c', 'polygon', 'chainlink']
    description: >
        Chainlink CCIP messages
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - evt_index
            - evt_tx_hash
            - message
    columns:
      - *origin
      - *destination
      - *feeTokenAmount
      - *sender
      - *receiver
      - *nonce
      - *gasLimit
      - *strict
      - *data
      - *destination_returnData
      - *tokenAmounts
      - *destination
      - *feeToken
      - *destination_state
      - *messageId
      - *router
      - *origin_contract_address
      - *destination_contract_address
      - *origin_evt_tx_hash
      - *destination_evt_tx_hash
      - *origin_evt_block_time
      - *destination_evt_block_time
      - *origin_evt_index
      - *destination_evt_index
      - *origin_evt_block_number
      - *destination_evt_block_number
      - *destination_sequenceNumber      