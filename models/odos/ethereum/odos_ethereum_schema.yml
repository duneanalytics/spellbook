version: 2

models:
  - name: odos_v2_ethereum_trades
    meta:
      blockchain: ethereum
      sector: dex
      project: odos
      contributors: amalashkevich
    config:
      tags: ['ethereum','trades', 'odos','dex']
    description: >
        A table containing all trades of odos v2 on ethereum
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - block_date
            - blockchain
            - project
            - version
            - tx_hash
            - evt_index 
            - trace_address
      - check_dex_aggregator_seed:
          blockchain: ethereum
          project: odos
          version: 2
    columns:
      - *blockchain
      - *project 
      - *version
      - *block_month
      - *block_date
      - *block_time
      - *token_bought_symbol
      - *token_sold_symbol
      - *token_pair
      - *token_bought_amount
      - *token_sold_amount
      - *token_bought_amount_raw
      - *token_sold_amount_raw
      - *amount_usd
      - *token_bought_address
      - *token_sold_address
      - *taker
      - *maker
      - *project_contract_address
      - *tx_hash
      - *tx_from
      - *tx_to
      - *evt_index
      - *trace_address
  
  - name: odos_ethereum_trades
    meta:
      blockchain: ethereum
      sector: dex
      project: odos
      contributors: amalashkevich
    config:
      tags: ['ethereum','trades', 'odos','dex']
    description: >
        A table containing all trades of odos on ethereum.
    columns:
      - *blockchain
      - *project 
      - *version
      - *block_month
      - *block_date
      - *block_time
      - *token_bought_symbol
      - *token_sold_symbol
      - *token_pair
      - *token_bought_amount
      - *token_sold_amount
      - *token_bought_amount_raw
      - *token_sold_amount_raw
      - *amount_usd
      - *token_bought_address
      - *token_sold_address
      - *taker
      - *maker
      - *project_contract_address
      - *tx_hash
      - *tx_from
      - *tx_to
      - *evt_index
      - *trace_address