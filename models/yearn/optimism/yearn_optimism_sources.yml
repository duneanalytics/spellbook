version: 2

sources:
  - name: yearn_optimism
    description: "Decoded contracts for Yearn on Optimism"

    tables:
    - name: ReleaseRegistry_call_newVault
      description: "Yearn New Vault Function Calls."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: call_block_time
      columns:     
        - &call_block_number
          name: call_block_number
          description: "Call block number"  
        - &call_block_time
          name: call_block_time
          description: "Timestamp for block time in UTC"
        - &_token
          name: _token
          description: "Underlying Deposit Token Address"  
        - &_symbol
          name: _symbol
          description: "Vault Symbol" 
        - &_name
          name: _name
          description: "Vault Name" 
        - &output_0
          name: output_0
          description: "Vault Token"

    - name: StableDebtToken_evt_Initialized
      description: "aToken initialization events, stable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - &debtTokenDecimals
          name: debtTokenDecimals
          description: "Decimals of the aToken"
        - &debtTokenSymbol
          name: debtTokenSymbol
          description: "Symbol of the aToken"
        - &debtTokenName
          name: debtTokenName
          description: "Name of the aToken" 
      
    - name: VariableDebtToken_evt_Initialized
      description: "aToken initialization events, variable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName

  - name: aave_v3_arbitrum
    description: "Decoded contracts for Aave on Arbitrum"

    tables:
    - name: AToken_evt_Initialized
      description: "aToken initialization events, supply tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address      
        - *evt_block_number
        - *evt_block_time
        - *evt_index 
        - *evt_tx_hash
        - *underlyingAsset
        - *aTokenDecimals
        - *aTokenSymbol
        - *aTokenName

    - name: StableDebtToken_evt_Initialized
      description: "aToken initialization events, stable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName
      
    - name: VariableDebtToken_evt_Initialized
      description: "aToken initialization events, variable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName
  
  - name: aave_v3_polygon
    description: "Decoded contracts for Aave on Polygon"
    tables:
    - name: AToken_evt_Initialized
      description: "aToken initialization events, supply tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address      
        - *evt_block_number
        - *evt_block_time
        - *evt_index 
        - *evt_tx_hash
        - *underlyingAsset
        - *aTokenDecimals
        - *aTokenSymbol
        - *aTokenName

    - name: StableDebtToken_evt_Initialized
      description: "aToken initialization events, stable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName
      
    - name: VariableDebtToken_evt_Initialized
      description: "aToken initialization events, variable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName
  
  - name: aave_v3_avalanche_c
    description: "Decoded contracts for Aave on Avalanche"
    tables:
    - name: AToken_evt_Initialized
      description: "aToken initialization events, supply tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address      
        - *evt_block_number
        - *evt_block_time
        - *evt_index 
        - *evt_tx_hash
        - *underlyingAsset
        - *aTokenDecimals
        - *aTokenSymbol
        - *aTokenName

    - name: StableDebtToken_evt_Initialized
      description: "aToken initialization events, stable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName
      
    - name: VariableDebtToken_evt_Initialized
      description: "aToken initialization events, variable debt tokens."
      freshness:
        warn_after: { count: 12, period: hour }
        error_after: { count: 24, period: hour }
      loaded_at_field: evt_block_time
      columns:
        - *contract_address  
        - *evt_block_number
        - *evt_block_time
        - *evt_index
        - *evt_tx_hash
        - *underlyingAsset
        - *debtTokenDecimals
        - *debtTokenSymbol
        - *debtTokenName